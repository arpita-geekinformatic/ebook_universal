{"version":3,"file":"src_app_layout_search_search_module_ts.js","mappings":"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","sources":["./src/app/layout/search/search-routing.module.ts","./src/app/layout/search/search.component.ts","./src/app/layout/search/search.component.html","./src/app/layout/search/search.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SearchComponent } from './search.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: SearchComponent,\n},];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SearchRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { environment } from \"src/environments/environment\";\nimport { ApiService } from 'src/app/services/api.service'\nimport { ToastrService } from 'ngx-toastr'\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class SearchComponent implements OnInit {\n  public IMAGE_URL = environment.IMAGE_URL;\n  audiobookSearch = environment.bookSearchType.Audiobook;\n  ebookSearch = environment.bookSearchType.Ebook;\n  podcastSearch = environment.bookSearchType.Podcast;\n  skip = 0;\n  limit: number = 10;\n  totalRecords = 0;\n  searchFilter: string = ''\n  searchListData: any = [];\n  errorMessage: string = '';\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private apiService: ApiService,\n    private toastr: ToastrService,\n  ) { }\n\n  ngOnInit(): void {\n    this.route.queryParams.subscribe(params => {\n      this.searchFilter = params['searchFilter'] != undefined ? params['searchFilter'] : '';\n      \n      if (this.searchFilter && this.searchFilter != undefined) {\n        this.searchListData = []\n        this.skip = 0;\n        this.getSearchData(this.searchFilter, this.skip, this.limit)\n      }\n    });\n  }\n\n  //  get searched book list  //\n  getSearchData(searchFilter: any, skip: any, limit: any) {\n    this.apiService.getData(`web/bookSearch?searchFilter=${searchFilter}&skip=${skip}&limit=${limit}`).subscribe(\n      (res: any) => {\n        this.searchListData.push(...res.data);\n        this.totalRecords = res.totalRecord || 0;\n\n        this.errorMessage = this.totalRecords == 0 ? 'No record found !!!' : ''\n      },\n      (error) => {\n        this.toastr.error(error.error.responseMessage, 'Error!')\n      },\n    )\n  }\n\n  //  load book on page scroll  //\n  onScroll() {\n    if (this.skip == 0 && this.searchListData.length < 1) {\n      this.skip = 0;\n    }\n    if (this.searchListData.length != this.totalRecords) {\n      this.skip = this.skip + 10;\n      this.getSearchData(this.searchFilter, this.skip, 10)\n    }\n  }\n\n  //  get book details  //\n  detailBook(id: any, type: any) {    \n    if (type.toLowerCase() == environment.tabType.podcast) {\n      this.router.navigate(\n        ['podcast-detail/'],\n        { queryParams: { 'id': id, 'type': type.toLowerCase() } }\n      );\n    }\n    else {\n      this.router.navigate(\n        ['detail/'],\n        { queryParams: { 'id': id, 'type': type.toLowerCase() } }\n      );\n    }\n  }\n\n  //  get rating html //\n  getRating(data: any) {\n    let beforePointValue = data.toString().split(\".\")[0]\n    let afterPointValue = data.toString().split(\".\")[1]\n    var temp: any = [0, 1, 2, 3, 4];\n    let html = '';\n    for (let i = 0; i < temp.length; i++) {\n      if (beforePointValue <= i) {\n        if (afterPointValue && afterPointValue != 0) {\n          html += `<li ><img src=\"/assets/images/halfStarRating.svg\" alt=\"Star half\" height=20; width=20; /></li>`;\n          afterPointValue = undefined;\n        } else {\n          html += `<li ><img src=\"/assets/images/starBlankIcon.svg\" alt=\"Star blank\" height=20; width=20; /></li>`\n        }\n      } else {\n        html += `<li ><img src=\"/assets/images/starFillIcon.svg\" alt=\"Star FIll\" height=20; width=20; /></li>`;\n      }\n    }\n    return html;\n  }\n}\n","<!-- <app-header (newSearchEvent)=\"getSearchData($event)\"></app-header> -->\n<app-header></app-header>\n<div class=\"contentPart\">\n    <ng-container>\n        <div class=\"container\">\n            \n            <div class=\"productline\">\n                <div class=\"row\" infiniteScroll [infiniteScrollDistance]=\"0.1\" (scrolled)=\"onScroll()\">\n                    <div class=\"col-sm-6 col-md-3 col-lg-3 mb-5 five-image-row\"\n                        *ngFor='let data of searchListData; let i = index'>\n                        <div class=\"singleProduct\" (click)=\"detailBook(data['_id'], data['bookType'])\">\n                            <div class=\"singleProductInner\">\n                               \n                                <button\n                                    [ngClass]=\"data['bookType'].toLowerCase() == 'ebook'? 'ebookBtn'  : data['bookType'].toLowerCase() == 'audiobook'? 'audiobookBtn' : 'podcastBtn'\">\n\n                                    <img [src]=\"data['bookType'].toLowerCase() == ebookSearch ? 'assets/images/openBookIcon.svg' : data['bookType'].toLowerCase() == audiobookSearch ? 'assets/images/headphoneIcon.svg' : 'assets/images/mic.svg'\"\n                                        alt=\"Book icon\" />\n                                </button>\n                                <div class=\"productImage\">\n                                    <img [src]=\"data['photo'] ? this.IMAGE_URL + data['photo'] : data['image'] ? this.IMAGE_URL + data['image'] : 'assets/images/smallDefaultBook.png'\"\n                                        alt=\"prduct Image\" />\n                                </div>\n                                <div class=\"productTxt\">\n                                    <h2>{{ data['name'] }}</h2>\n                                    <p>{{ data.author }}</p>\n                                    <ul class=\"ratingWrap\" [innerHtml]=\"getRating(data.rating)\">\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div>\n                <h6>{{ errorMessage }}</h6>\n            </div>\n        </div>\n    </ng-container>\n</div>\n\n<!-- Shimmer Start -->\n<div class=\"contentPart\" *ngIf=\"searchListData.length != totalRecords && searchListData.length != 0\">\n    <ng-container>\n        <div class=\"container\">\n        \n            <div class=\"productline\">\n                <div class=\"row\">\n                    <div class=\"col-md-3 mb-4 \">\n                        <div class=\"singleProduct shimmer\">\n                            <div class=\"singleProductInner\">\n                                <div class=\"productImage\">\n                                    <span class=\"\"></span>\n                                </div>\n                                <div class=\"productTxt\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 mb-4 \">\n                        <div class=\"singleProduct shimmer\">\n                            <div class=\"singleProductInner\">\n                                <div class=\"productImage\">\n                                    <span class=\"\"></span>\n                                </div>\n                                <div class=\"productTxt\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 mb-4 \">\n                        <div class=\"singleProduct shimmer\">\n                            <div class=\"singleProductInner\">\n                                <div class=\"productImage\">\n                                    <span class=\"\"></span>\n                                </div>\n                                <div class=\"productTxt\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3 mb-4 \">\n                        <div class=\"singleProduct shimmer\">\n                            <div class=\"singleProductInner\">\n                                <div class=\"productImage\">\n                                    <span class=\"\"></span>\n                                </div>\n                                <div class=\"productTxt\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n</div>\n<!-- Shimmer Ends -->\n\n<app-footer></app-footer>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SearchRoutingModule } from './search-routing.module';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { SearchComponent } from './search.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\n\n@NgModule({\n  declarations: [SearchComponent],\n  imports: [\n    CommonModule,\n    SearchRoutingModule,\n    SharedModule,\n    NgbModule,\n    InfiniteScrollModule\n  ]\n})\nexport class SearchModule { }\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
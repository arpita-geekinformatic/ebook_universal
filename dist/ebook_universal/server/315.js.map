{"version":3,"file":"315.js","mappings":"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ACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2BAA2B,2CAA2C;AACtE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN,6BAA6B,uCAAuC;AACpE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,6CAA6C;AACxE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,6BAA6B;AAC5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,2CAA2C;AAC1E;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACvMa;;AAEb,oBAAoB,mBAAO,CAAC,+BAAoB;AAChD,cAAc,mBAAO,CAAC,uBAAY;AAClC,aAAa,mBAAO,CAAC,2BAAgB;;AAErC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,cAAc,UAAU;AACxB,cAAc;AACd;AACA;;;;;;;;;;;;AClMa;;AAEb,kEAAwC;AACxC,yFAAkE;AAClE,qGAA8E;AAC9E,2FAAoE;AACpE,6FAAsE;AACtE,6FAAsE;AACtE,2FAAoE;AACpE,iGAA0E;AAC1E,iFAA0D;;;;;;;;;;;ACV7C;AACb,iBAAiB,mBAAO,CAAC,qBAAU;AACnC,aAAa,mBAAO,CAAC,iBAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,mCAAmC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,8CAA8C;AAC9C;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,+CAA+C,sEAAsE;AACrH;;;;;;;;;;;AChxCa;;AAEb,oBAAoB;AACpB;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;;AAEA,4BAA4B;AAC5B,yBAAyB;;AAEzB,6BAA6B;AAC7B;AACA;;AAEA,6BAA6B;AAC7B;AACA;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIkC,IAAI,GAAG,uBAAX;AACA,IAAIC,OAAO,GAAG,OAAd;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,gCAAgC,GAAG,IAAzC;;AACA,SAASC,iBAAT,GAA6B;EACzB,IAAIC,EAAJ;;EACA,OAAO,CAAC,CAACA,EAAE,GAAGC,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACC,QAAvD,MAAqE,IAArE,IAA6EF,EAAE,KAAK,KAAK,CAAzF,GAA6F,KAAK,CA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","sources":["./node_modules/@firebase/auth/node_modules/tr46/index.js","./node_modules/@firebase/auth-compat/node_modules/webidl-conversions/lib/index.js","./node_modules/@firebase/auth-compat/node_modules/whatwg-url/lib/URL-impl.js","./node_modules/@firebase/auth-compat/node_modules/whatwg-url/lib/URL.js","./node_modules/@firebase/auth-compat/node_modules/whatwg-url/lib/public-api.js","./node_modules/@firebase/auth-compat/node_modules/whatwg-url/lib/url-state-machine.js","./node_modules/@firebase/auth-compat/node_modules/whatwg-url/lib/utils.js","./node_modules/@firebase/auth-compat/dist/esm/index.node.esm.js","./node_modules/@firebase/auth-compat/node_modules/node-fetch/lib/index.mjs","./node_modules/@firebase/auth/dist/node-esm/internal.js","./node_modules/firebase/compat/auth/dist/index.mjs"],"sourcesContent":["\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","import firebase from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport { FetchProvider } from '@firebase/auth/internal';\nimport { Component } from '@firebase/component';\nimport { isBrowserExtension, getUA, isReactNative, isNode, isIndexedDBAvailable, isIE, FirebaseError } from '@firebase/util';\nimport * as fetchImpl from 'node-fetch';\n\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.3.5\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\r\nfunction _getCurrentScheme() {\r\n    var _a;\r\n    return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\r\n}\r\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\r\nfunction _isHttpOrHttps() {\r\n    return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\r\n}\r\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\r\nfunction _isAndroidOrIosCordovaScheme(ua = getUA()) {\r\n    return !!((_getCurrentScheme() === 'file:' ||\r\n        _getCurrentScheme() === 'ionic:' ||\r\n        _getCurrentScheme() === 'capacitor:') &&\r\n        ua.toLowerCase().match(/iphone|ipad|ipod|android/));\r\n}\r\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\r\nfunction _isNativeEnvironment() {\r\n    return isReactNative() || isNode();\r\n}\r\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\r\nfunction _isIe11() {\r\n    return isIE() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\r\n}\r\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\r\nfunction _isEdge(ua = getUA()) {\r\n    return /Edge\\/\\d+/.test(ua);\r\n}\r\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\r\nfunction _isLocalStorageNotSynchronized(ua = getUA()) {\r\n    return _isIe11() || _isEdge(ua);\r\n}\r\n/** @return {boolean} Whether web storage is supported. */\r\nfunction _isWebStorageSupported() {\r\n    try {\r\n        const storage = self.localStorage;\r\n        const key = exp._generateEventId();\r\n        if (storage) {\r\n            // setItem will throw an exception if we cannot access WebStorage (e.g.,\r\n            // Safari in private mode).\r\n            storage['setItem'](key, '1');\r\n            storage['removeItem'](key);\r\n            // For browsers where iframe web storage does not synchronize with a popup\r\n            // of the same domain, indexedDB is used for persistent storage. These\r\n            // browsers include IE11 and Edge.\r\n            // Make sure it is supported (IE11 and Edge private mode does not support\r\n            // that).\r\n            if (_isLocalStorageNotSynchronized()) {\r\n                // In such browsers, if indexedDB is not supported, an iframe cannot be\r\n                // notified of the popup sign in result.\r\n                return isIndexedDBAvailable();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // localStorage is not available from a worker. Test availability of\r\n        // indexedDB.\r\n        return _isWorker() && isIndexedDBAvailable();\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\r\nfunction _isWorker() {\r\n    // WorkerGlobalScope only defined in worker environment.\r\n    return (typeof global !== 'undefined' &&\r\n        'WorkerGlobalScope' in global &&\r\n        'importScripts' in global);\r\n}\r\nfunction _isPopupRedirectSupported() {\r\n    return ((_isHttpOrHttps() ||\r\n        isBrowserExtension() ||\r\n        _isAndroidOrIosCordovaScheme()) &&\r\n        // React Native with remote debugging reports its location.protocol as\r\n        // http.\r\n        !_isNativeEnvironment() &&\r\n        // Local storage has to be supported for browser popup and redirect\r\n        // operations to work.\r\n        _isWebStorageSupported() &&\r\n        // DOM, popups and redirects are not supported within a worker.\r\n        !_isWorker());\r\n}\r\n/** Quick check that indicates the platform *may* be Cordova */\r\nfunction _isLikelyCordova() {\r\n    return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\r\n}\r\nasync function _isCordova() {\r\n    if (!_isLikelyCordova()) {\r\n        return false;\r\n    }\r\n    return new Promise(resolve => {\r\n        const timeoutId = setTimeout(() => {\r\n            // We've waited long enough; the telltale Cordova event didn't happen\r\n            resolve(false);\r\n        }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\r\n        document.addEventListener('deviceready', () => {\r\n            clearTimeout(timeoutId);\r\n            resolve(true);\r\n        });\r\n    });\r\n}\r\nfunction _getSelfWindow() {\r\n    return typeof window !== 'undefined' ? window : null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst Persistence = {\r\n    LOCAL: 'local',\r\n    NONE: 'none',\r\n    SESSION: 'session'\r\n};\r\nconst _assert$3 = exp._assert;\r\nconst PERSISTENCE_KEY = 'persistence';\r\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\r\nfunction _validatePersistenceArgument(auth, persistence) {\r\n    _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\" /* exp.AuthErrorCode.INVALID_PERSISTENCE */);\r\n    // Validate if the specified type is supported in the current environment.\r\n    if (isReactNative()) {\r\n        // This is only supported in a browser.\r\n        _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (isNode()) {\r\n        // Only none is supported in Node.js.\r\n        _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (_isWorker()) {\r\n        // In a worker environment, either LOCAL or NONE are supported.\r\n        // If indexedDB not supported and LOCAL provided, throw an error\r\n        _assert$3(persistence === Persistence.NONE ||\r\n            (persistence === Persistence.LOCAL && isIndexedDBAvailable()), auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    // This is restricted by what the browser supports.\r\n    _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n}\r\nasync function _savePersistenceForRedirect(auth) {\r\n    await auth._initializationPromise;\r\n    const session = getSessionStorageIfAvailable();\r\n    const key = exp._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\r\n    if (session) {\r\n        session.setItem(key, auth._getPersistence());\r\n    }\r\n}\r\nfunction _getPersistencesFromRedirect(apiKey, appName) {\r\n    const session = getSessionStorageIfAvailable();\r\n    if (!session) {\r\n        return [];\r\n    }\r\n    const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\r\n    const persistence = session.getItem(key);\r\n    switch (persistence) {\r\n        case Persistence.NONE:\r\n            return [exp.inMemoryPersistence];\r\n        case Persistence.LOCAL:\r\n            return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\r\n        case Persistence.SESSION:\r\n            return [exp.browserSessionPersistence];\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n/** Returns session storage, or null if the property access errors */\r\nfunction getSessionStorageIfAvailable() {\r\n    var _a;\r\n    try {\r\n        return ((_a = _getSelfWindow()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || null;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$2 = exp._assert;\r\n/** Platform-agnostic popup-redirect resolver */\r\nclass CompatPopupRedirectResolver {\r\n    constructor() {\r\n        // Create both resolvers for dynamic resolution later\r\n        this.browserResolver = exp._getInstance(exp.browserPopupRedirectResolver);\r\n        this.cordovaResolver = exp._getInstance(exp.cordovaPopupRedirectResolver);\r\n        // The actual resolver in use: either browserResolver or cordovaResolver.\r\n        this.underlyingResolver = null;\r\n        this._redirectPersistence = exp.browserSessionPersistence;\r\n        this._completeRedirectFn = exp._getRedirectResult;\r\n        this._overrideRedirectResult = exp._overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._initialize(auth);\r\n    }\r\n    async _openPopup(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\r\n    }\r\n    _isIframeWebStorageSupported(auth, cb) {\r\n        this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\r\n    }\r\n    _originValidation(auth) {\r\n        return this.assertedUnderlyingResolver._originValidation(auth);\r\n    }\r\n    get _shouldInitProactively() {\r\n        return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\r\n    }\r\n    get assertedUnderlyingResolver() {\r\n        _assert$2(this.underlyingResolver, \"internal-error\" /* exp.AuthErrorCode.INTERNAL_ERROR */);\r\n        return this.underlyingResolver;\r\n    }\r\n    async selectUnderlyingResolver() {\r\n        if (this.underlyingResolver) {\r\n            return;\r\n        }\r\n        // We haven't yet determined whether or not we're in Cordova; go ahead\r\n        // and determine that state now.\r\n        const isCordova = await _isCordova();\r\n        this.underlyingResolver = isCordova\r\n            ? this.cordovaResolver\r\n            : this.browserResolver;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction unwrap(object) {\r\n    return object.unwrap();\r\n}\r\nfunction wrapped(object) {\r\n    return object.wrapped();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction credentialFromResponse(userCredential) {\r\n    return credentialFromObject(userCredential);\r\n}\r\nfunction attachExtraErrorFields(auth, e) {\r\n    var _a;\r\n    // The response contains all fields from the server which may or may not\r\n    // actually match the underlying type\r\n    const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\r\n    if ((e === null || e === void 0 ? void 0 : e.code) === 'auth/multi-factor-auth-required') {\r\n        const mfaErr = e;\r\n        mfaErr.resolver = new MultiFactorResolver(auth, exp.getMultiFactorResolver(auth, e));\r\n    }\r\n    else if (response) {\r\n        const credential = credentialFromObject(e);\r\n        const credErr = e;\r\n        if (credential) {\r\n            credErr.credential = credential;\r\n            credErr.tenantId = response.tenantId || undefined;\r\n            credErr.email = response.email || undefined;\r\n            credErr.phoneNumber = response.phoneNumber || undefined;\r\n        }\r\n    }\r\n}\r\nfunction credentialFromObject(object) {\r\n    const { _tokenResponse } = (object instanceof FirebaseError ? object.customData : object);\r\n    if (!_tokenResponse) {\r\n        return null;\r\n    }\r\n    // Handle phone Auth credential responses, as they have a different format\r\n    // from other backend responses (i.e. no providerId). This is also only the\r\n    // case for user credentials (does not work for errors).\r\n    if (!(object instanceof FirebaseError)) {\r\n        if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\r\n            return exp.PhoneAuthProvider.credentialFromResult(object);\r\n        }\r\n    }\r\n    const providerId = _tokenResponse.providerId;\r\n    // Email and password is not supported as there is no situation where the\r\n    // server would return the password to the client.\r\n    if (!providerId || providerId === exp.ProviderId.PASSWORD) {\r\n        return null;\r\n    }\r\n    let provider;\r\n    switch (providerId) {\r\n        case exp.ProviderId.GOOGLE:\r\n            provider = exp.GoogleAuthProvider;\r\n            break;\r\n        case exp.ProviderId.FACEBOOK:\r\n            provider = exp.FacebookAuthProvider;\r\n            break;\r\n        case exp.ProviderId.GITHUB:\r\n            provider = exp.GithubAuthProvider;\r\n            break;\r\n        case exp.ProviderId.TWITTER:\r\n            provider = exp.TwitterAuthProvider;\r\n            break;\r\n        default:\r\n            const { oauthIdToken, oauthAccessToken, oauthTokenSecret, pendingToken, nonce } = _tokenResponse;\r\n            if (!oauthAccessToken &&\r\n                !oauthTokenSecret &&\r\n                !oauthIdToken &&\r\n                !pendingToken) {\r\n                return null;\r\n            }\r\n            // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\r\n            if (pendingToken) {\r\n                if (providerId.startsWith('saml.')) {\r\n                    return exp.SAMLAuthCredential._create(providerId, pendingToken);\r\n                }\r\n                else {\r\n                    // OIDC and non-default providers excluding Twitter.\r\n                    return exp.OAuthCredential._fromParams({\r\n                        providerId,\r\n                        signInMethod: providerId,\r\n                        pendingToken,\r\n                        idToken: oauthIdToken,\r\n                        accessToken: oauthAccessToken\r\n                    });\r\n                }\r\n            }\r\n            return new exp.OAuthProvider(providerId).credential({\r\n                idToken: oauthIdToken,\r\n                accessToken: oauthAccessToken,\r\n                rawNonce: nonce\r\n            });\r\n    }\r\n    return object instanceof FirebaseError\r\n        ? provider.credentialFromError(object)\r\n        : provider.credentialFromResult(object);\r\n}\r\nfunction convertCredential(auth, credentialPromise) {\r\n    return credentialPromise\r\n        .catch(e => {\r\n        if (e instanceof FirebaseError) {\r\n            attachExtraErrorFields(auth, e);\r\n        }\r\n        throw e;\r\n    })\r\n        .then(credential => {\r\n        const operationType = credential.operationType;\r\n        const user = credential.user;\r\n        return {\r\n            operationType,\r\n            credential: credentialFromResponse(credential),\r\n            additionalUserInfo: exp.getAdditionalUserInfo(credential),\r\n            user: User.getOrCreate(user)\r\n        };\r\n    });\r\n}\r\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\r\n    const confirmationResultExp = await confirmationResultPromise;\r\n    return {\r\n        verificationId: confirmationResultExp.verificationId,\r\n        confirm: (verificationCode) => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\r\n    };\r\n}\r\nclass MultiFactorResolver {\r\n    constructor(auth, resolver) {\r\n        this.resolver = resolver;\r\n        this.auth = wrapped(auth);\r\n    }\r\n    get session() {\r\n        return this.resolver.session;\r\n    }\r\n    get hints() {\r\n        return this.resolver.hints;\r\n    }\r\n    resolveSignIn(assertion) {\r\n        return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass User {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n        this.multiFactor = exp.multiFactor(_delegate);\r\n    }\r\n    static getOrCreate(user) {\r\n        if (!User.USER_MAP.has(user)) {\r\n            User.USER_MAP.set(user, new User(user));\r\n        }\r\n        return User.USER_MAP.get(user);\r\n    }\r\n    delete() {\r\n        return this._delegate.delete();\r\n    }\r\n    reload() {\r\n        return this._delegate.reload();\r\n    }\r\n    toJSON() {\r\n        return this._delegate.toJSON();\r\n    }\r\n    getIdTokenResult(forceRefresh) {\r\n        return this._delegate.getIdTokenResult(forceRefresh);\r\n    }\r\n    getIdToken(forceRefresh) {\r\n        return this._delegate.getIdToken(forceRefresh);\r\n    }\r\n    linkAndRetrieveDataWithCredential(credential) {\r\n        return this.linkWithCredential(credential);\r\n    }\r\n    async linkWithCredential(credential) {\r\n        return convertCredential(this.auth, exp.linkWithCredential(this._delegate, credential));\r\n    }\r\n    async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async linkWithPopup(provider) {\r\n        return convertCredential(this.auth, exp.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async linkWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(exp._castAuth(this.auth));\r\n        return exp.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    reauthenticateAndRetrieveDataWithCredential(credential) {\r\n        return this.reauthenticateWithCredential(credential);\r\n    }\r\n    async reauthenticateWithCredential(credential) {\r\n        return convertCredential(this.auth, exp.reauthenticateWithCredential(this._delegate, credential));\r\n    }\r\n    reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, exp.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    reauthenticateWithPopup(provider) {\r\n        return convertCredential(this.auth, exp.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async reauthenticateWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(exp._castAuth(this.auth));\r\n        return exp.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    sendEmailVerification(actionCodeSettings) {\r\n        return exp.sendEmailVerification(this._delegate, actionCodeSettings);\r\n    }\r\n    async unlink(providerId) {\r\n        await exp.unlink(this._delegate, providerId);\r\n        return this;\r\n    }\r\n    updateEmail(newEmail) {\r\n        return exp.updateEmail(this._delegate, newEmail);\r\n    }\r\n    updatePassword(newPassword) {\r\n        return exp.updatePassword(this._delegate, newPassword);\r\n    }\r\n    updatePhoneNumber(phoneCredential) {\r\n        return exp.updatePhoneNumber(this._delegate, phoneCredential);\r\n    }\r\n    updateProfile(profile) {\r\n        return exp.updateProfile(this._delegate, profile);\r\n    }\r\n    verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\r\n        return exp.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\r\n    }\r\n    get emailVerified() {\r\n        return this._delegate.emailVerified;\r\n    }\r\n    get isAnonymous() {\r\n        return this._delegate.isAnonymous;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get phoneNumber() {\r\n        return this._delegate.phoneNumber;\r\n    }\r\n    get providerData() {\r\n        return this._delegate.providerData;\r\n    }\r\n    get refreshToken() {\r\n        return this._delegate.refreshToken;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    get displayName() {\r\n        return this._delegate.displayName;\r\n    }\r\n    get email() {\r\n        return this._delegate.email;\r\n    }\r\n    get photoURL() {\r\n        return this._delegate.photoURL;\r\n    }\r\n    get providerId() {\r\n        return this._delegate.providerId;\r\n    }\r\n    get uid() {\r\n        return this._delegate.uid;\r\n    }\r\n    get auth() {\r\n        return this._delegate.auth;\r\n    }\r\n}\r\n// Maintain a map so that there's always a 1:1 mapping between new User and\r\n// legacy compat users\r\nUser.USER_MAP = new WeakMap();\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$1 = exp._assert;\r\nclass Auth {\r\n    constructor(app, provider) {\r\n        this.app = app;\r\n        if (provider.isInitialized()) {\r\n            this._delegate = provider.getImmediate();\r\n            this.linkUnderlyingAuth();\r\n            return;\r\n        }\r\n        const { apiKey } = app.options;\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // Only use a popup/redirect resolver in browser environments\r\n        const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\r\n        this._delegate = provider.initialize({\r\n            options: {\r\n                persistence: buildPersistenceHierarchy(apiKey, app.name),\r\n                popupRedirectResolver: resolver\r\n            }\r\n        });\r\n        this._delegate._updateErrorMap(exp.debugErrorMap);\r\n        this.linkUnderlyingAuth();\r\n    }\r\n    get emulatorConfig() {\r\n        return this._delegate.emulatorConfig;\r\n    }\r\n    get currentUser() {\r\n        if (!this._delegate.currentUser) {\r\n            return null;\r\n        }\r\n        return User.getOrCreate(this._delegate.currentUser);\r\n    }\r\n    get languageCode() {\r\n        return this._delegate.languageCode;\r\n    }\r\n    set languageCode(languageCode) {\r\n        this._delegate.languageCode = languageCode;\r\n    }\r\n    get settings() {\r\n        return this._delegate.settings;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    set tenantId(tid) {\r\n        this._delegate.tenantId = tid;\r\n    }\r\n    useDeviceLanguage() {\r\n        this._delegate.useDeviceLanguage();\r\n    }\r\n    signOut() {\r\n        return this._delegate.signOut();\r\n    }\r\n    useEmulator(url, options) {\r\n        exp.connectAuthEmulator(this._delegate, url, options);\r\n    }\r\n    applyActionCode(code) {\r\n        return exp.applyActionCode(this._delegate, code);\r\n    }\r\n    checkActionCode(code) {\r\n        return exp.checkActionCode(this._delegate, code);\r\n    }\r\n    confirmPasswordReset(code, newPassword) {\r\n        return exp.confirmPasswordReset(this._delegate, code, newPassword);\r\n    }\r\n    async createUserWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, exp.createUserWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    fetchProvidersForEmail(email) {\r\n        return this.fetchSignInMethodsForEmail(email);\r\n    }\r\n    fetchSignInMethodsForEmail(email) {\r\n        return exp.fetchSignInMethodsForEmail(this._delegate, email);\r\n    }\r\n    isSignInWithEmailLink(emailLink) {\r\n        return exp.isSignInWithEmailLink(this._delegate, emailLink);\r\n    }\r\n    async getRedirectResult() {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        const credential = await exp.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\r\n        if (!credential) {\r\n            return {\r\n                credential: null,\r\n                user: null\r\n            };\r\n        }\r\n        return convertCredential(this._delegate, Promise.resolve(credential));\r\n    }\r\n    // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n    // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\r\n    // out of autogenerated documentation pages to reduce accidental misuse.\r\n    addFrameworkForLogging(framework) {\r\n        exp.addFrameworkForLogging(this._delegate, framework);\r\n    }\r\n    onAuthStateChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onAuthStateChanged(next, error, complete);\r\n    }\r\n    onIdTokenChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onIdTokenChanged(next, error, complete);\r\n    }\r\n    sendSignInLinkToEmail(email, actionCodeSettings) {\r\n        return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\r\n    }\r\n    sendPasswordResetEmail(email, actionCodeSettings) {\r\n        return exp.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\r\n    }\r\n    async setPersistence(persistence) {\r\n        _validatePersistenceArgument(this._delegate, persistence);\r\n        let converted;\r\n        switch (persistence) {\r\n            case Persistence.SESSION:\r\n                converted = exp.browserSessionPersistence;\r\n                break;\r\n            case Persistence.LOCAL:\r\n                // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\r\n                const isIndexedDBFullySupported = await exp\r\n                    ._getInstance(exp.indexedDBLocalPersistence)\r\n                    ._isAvailable();\r\n                converted = isIndexedDBFullySupported\r\n                    ? exp.indexedDBLocalPersistence\r\n                    : exp.browserLocalPersistence;\r\n                break;\r\n            case Persistence.NONE:\r\n                converted = exp.inMemoryPersistence;\r\n                break;\r\n            default:\r\n                return exp._fail(\"argument-error\" /* exp.AuthErrorCode.ARGUMENT_ERROR */, {\r\n                    appName: this._delegate.name\r\n                });\r\n        }\r\n        return this._delegate.setPersistence(converted);\r\n    }\r\n    signInAndRetrieveDataWithCredential(credential) {\r\n        return this.signInWithCredential(credential);\r\n    }\r\n    signInAnonymously() {\r\n        return convertCredential(this._delegate, exp.signInAnonymously(this._delegate));\r\n    }\r\n    signInWithCredential(credential) {\r\n        return convertCredential(this._delegate, exp.signInWithCredential(this._delegate, credential));\r\n    }\r\n    signInWithCustomToken(token) {\r\n        return convertCredential(this._delegate, exp.signInWithCustomToken(this._delegate, token));\r\n    }\r\n    signInWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, exp.signInWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    signInWithEmailLink(email, emailLink) {\r\n        return convertCredential(this._delegate, exp.signInWithEmailLink(this._delegate, email, emailLink));\r\n    }\r\n    signInWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this._delegate, exp.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async signInWithPopup(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        return convertCredential(this._delegate, exp.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async signInWithRedirect(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        await _savePersistenceForRedirect(this._delegate);\r\n        return exp.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    updateCurrentUser(user) {\r\n        // remove ts-ignore once overloads are defined for exp functions to accept compat objects\r\n        // @ts-ignore\r\n        return this._delegate.updateCurrentUser(user);\r\n    }\r\n    verifyPasswordResetCode(code) {\r\n        return exp.verifyPasswordResetCode(this._delegate, code);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n    _delete() {\r\n        return this._delegate._delete();\r\n    }\r\n    linkUnderlyingAuth() {\r\n        this._delegate.wrapped = () => this;\r\n    }\r\n}\r\nAuth.Persistence = Persistence;\r\nfunction wrapObservers(nextOrObserver, error, complete) {\r\n    let next = nextOrObserver;\r\n    if (typeof nextOrObserver !== 'function') {\r\n        ({ next, error, complete } = nextOrObserver);\r\n    }\r\n    // We know 'next' is now a function\r\n    const oldNext = next;\r\n    const newNext = (user) => oldNext(user && User.getOrCreate(user));\r\n    return {\r\n        next: newNext,\r\n        error: error,\r\n        complete\r\n    };\r\n}\r\nfunction buildPersistenceHierarchy(apiKey, appName) {\r\n    // Note this is slightly different behavior: in this case, the stored\r\n    // persistence is checked *first* rather than last. This is because we want\r\n    // to prefer stored persistence type in the hierarchy. This is an empty\r\n    // array if window is not available or there is no pending redirect\r\n    const persistences = _getPersistencesFromRedirect(apiKey, appName);\r\n    // If \"self\" is available, add indexedDB\r\n    if (typeof self !== 'undefined' &&\r\n        !persistences.includes(exp.indexedDBLocalPersistence)) {\r\n        persistences.push(exp.indexedDBLocalPersistence);\r\n    }\r\n    // If \"window\" is available, add HTML Storage persistences\r\n    if (typeof window !== 'undefined') {\r\n        for (const persistence of [\r\n            exp.browserLocalPersistence,\r\n            exp.browserSessionPersistence\r\n        ]) {\r\n            if (!persistences.includes(persistence)) {\r\n                persistences.push(persistence);\r\n            }\r\n        }\r\n    }\r\n    // Add in-memory as a final fallback\r\n    if (!persistences.includes(exp.inMemoryPersistence)) {\r\n        persistences.push(exp.inMemoryPersistence);\r\n    }\r\n    return persistences;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PhoneAuthProvider {\r\n    constructor() {\r\n        this.providerId = 'phone';\r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth()));\r\n    }\r\n    static credential(verificationId, verificationCode) {\r\n        return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\r\n    }\r\n    verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\r\n        return this._delegate.verifyPhoneNumber(\r\n        // The implementation matches but the types are subtly incompatible\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        phoneInfoOptions, applicationVerifier);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n}\r\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\r\nPhoneAuthProvider.PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert = exp._assert;\r\nclass RecaptchaVerifier {\r\n    constructor(container, parameters, app = firebase.app()) {\r\n        var _a;\r\n        // API key is required for web client RPC calls.\r\n        _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        this._delegate = new exp.RecaptchaVerifier(container, \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        parameters, \r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        app.auth());\r\n        this.type = this._delegate.type;\r\n    }\r\n    clear() {\r\n        this._delegate.clear();\r\n    }\r\n    render() {\r\n        return this._delegate.render();\r\n    }\r\n    verify() {\r\n        return this._delegate.verify();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst AUTH_TYPE = 'auth-compat';\r\n// Create auth components to register with firebase.\r\n// Provides Auth public APIs.\r\nfunction registerAuthCompat(instance) {\r\n    instance.INTERNAL.registerComponent(new Component(AUTH_TYPE, container => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const authProvider = container.getProvider('auth');\r\n        return new Auth(app, authProvider);\r\n    }, \"PUBLIC\" /* ComponentType.PUBLIC */)\r\n        .setServiceProps({\r\n        ActionCodeInfo: {\r\n            Operation: {\r\n                EMAIL_SIGNIN: exp.ActionCodeOperation.EMAIL_SIGNIN,\r\n                PASSWORD_RESET: exp.ActionCodeOperation.PASSWORD_RESET,\r\n                RECOVER_EMAIL: exp.ActionCodeOperation.RECOVER_EMAIL,\r\n                REVERT_SECOND_FACTOR_ADDITION: exp.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\r\n                VERIFY_AND_CHANGE_EMAIL: exp.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\r\n                VERIFY_EMAIL: exp.ActionCodeOperation.VERIFY_EMAIL\r\n            }\r\n        },\r\n        EmailAuthProvider: exp.EmailAuthProvider,\r\n        FacebookAuthProvider: exp.FacebookAuthProvider,\r\n        GithubAuthProvider: exp.GithubAuthProvider,\r\n        GoogleAuthProvider: exp.GoogleAuthProvider,\r\n        OAuthProvider: exp.OAuthProvider,\r\n        SAMLAuthProvider: exp.SAMLAuthProvider,\r\n        PhoneAuthProvider: PhoneAuthProvider,\r\n        PhoneMultiFactorGenerator: exp.PhoneMultiFactorGenerator,\r\n        RecaptchaVerifier: RecaptchaVerifier,\r\n        TwitterAuthProvider: exp.TwitterAuthProvider,\r\n        Auth,\r\n        AuthCredential: exp.AuthCredential,\r\n        Error: FirebaseError\r\n    })\r\n        .setInstantiationMode(\"LAZY\" /* InstantiationMode.LAZY */)\r\n        .setMultipleInstances(false));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterAuthCompat(firebase);\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nFetchProvider.initialize(fetchImpl.default, fetchImpl.Headers, fetchImpl.Response);\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","import { ap as _getInstance, aq as _assert, ar as _signInWithCredential, as as _reauthenticate, at as _link$1, H as AuthCredential, au as signInWithIdp, av as _fail, aw as debugAssert, ax as _persistenceKeyName, ay as _castAuth, az as FederatedAuthProvider, aA as BaseOAuthProvider, aB as _emulatorUrl, aC as _performApiRequest, aD as _isIOS, aE as _isAndroid, aF as _isIOS7Or8, aG as _createError, aH as _isIframe, aI as _isMobileBrowser, aJ as _isIE10, aK as _isSafari } from './index-1f9492de.js';\nexport { A as ActionCodeOperation, ad as ActionCodeURL, H as AuthCredential, D as AuthErrorCodes, aM as AuthImpl, I as EmailAuthCredential, M as EmailAuthProvider, N as FacebookAuthProvider, F as FactorId, aO as FetchProvider, T as GithubAuthProvider, Q as GoogleAuthProvider, J as OAuthCredential, U as OAuthProvider, O as OperationType, K as PhoneAuthCredential, P as PhoneAuthProvider, m as PhoneMultiFactorGenerator, o as ProviderId, R as RecaptchaVerifier, aP as SAMLAuthCredential, V as SAMLAuthProvider, S as SignInMethod, W as TwitterAuthProvider, aL as UserImpl, aq as _assert, ay as _castAuth, av as _fail, aN as _getClientVersion, ap as _getInstance, ax as _persistenceKeyName, a2 as applyActionCode, t as beforeAuthStateChanged, b as browserLocalPersistence, k as browserPopupRedirectResolver, a as browserSessionPersistence, a3 as checkActionCode, a1 as confirmPasswordReset, G as connectAuthEmulator, a5 as createUserWithEmailAndPassword, B as debugErrorMap, z as deleteUser, aa as fetchSignInMethodsForEmail, al as getAdditionalUserInfo, n as getAuth, ai as getIdToken, aj as getIdTokenResult, an as getMultiFactorResolver, j as getRedirectResult, L as inMemoryPersistence, i as indexedDBLocalPersistence, E as initializeAuth, a8 as isSignInWithEmailLink, Z as linkWithCredential, l as linkWithPhoneNumber, d as linkWithPopup, g as linkWithRedirect, ao as multiFactor, v as onAuthStateChanged, q as onIdTokenChanged, ae as parseActionCodeURL, C as prodErrorMap, _ as reauthenticateWithCredential, r as reauthenticateWithPhoneNumber, e as reauthenticateWithPopup, h as reauthenticateWithRedirect, am as reload, ab as sendEmailVerification, a0 as sendPasswordResetEmail, a7 as sendSignInLinkToEmail, p as setPersistence, X as signInAnonymously, Y as signInWithCredential, $ as signInWithCustomToken, a6 as signInWithEmailAndPassword, a9 as signInWithEmailLink, s as signInWithPhoneNumber, c as signInWithPopup, f as signInWithRedirect, y as signOut, ak as unlink, x as updateCurrentUser, ag as updateEmail, ah as updatePassword, u as updatePhoneNumber, af as updateProfile, w as useDeviceLanguage, ac as verifyBeforeUpdateEmail, a4 as verifyPasswordResetCode } from './index-1f9492de.js';\nimport { isEmpty, querystring, getUA, querystringDecode } from '@firebase/util';\nimport 'tslib';\nimport { SDK_VERSION } from '@firebase/app';\nimport '@firebase/logger';\nimport '@firebase/component';\nimport 'node-fetch';\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _generateEventId(prefix = '', digits = 10) {\r\n    let random = '';\r\n    for (let i = 0; i < digits; i++) {\r\n        random += Math.floor(Math.random() * 10);\r\n    }\r\n    return prefix + random;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass AuthPopup {\r\n    constructor(window) {\r\n        this.window = window;\r\n        this.associatedEvent = null;\r\n    }\r\n    close() {\r\n        if (this.window) {\r\n            try {\r\n                this.window.close();\r\n            }\r\n            catch (e) { }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Chooses a popup/redirect resolver to use. This prefers the override (which\r\n * is directly passed in), and falls back to the property set on the auth\r\n * object. If neither are available, this function errors w/ an argument error.\r\n */\r\nfunction _withDefaultResolver(auth, resolverOverride) {\r\n    if (resolverOverride) {\r\n        return _getInstance(resolverOverride);\r\n    }\r\n    _assert(auth._popupRedirectResolver, auth, \"argument-error\" /* AuthErrorCode.ARGUMENT_ERROR */);\r\n    return auth._popupRedirectResolver;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass IdpCredential extends AuthCredential {\r\n    constructor(params) {\r\n        super(\"custom\" /* ProviderId.CUSTOM */, \"custom\" /* ProviderId.CUSTOM */);\r\n        this.params = params;\r\n    }\r\n    _getIdTokenResponse(auth) {\r\n        return signInWithIdp(auth, this._buildIdpRequest());\r\n    }\r\n    _linkToIdToken(auth, idToken) {\r\n        return signInWithIdp(auth, this._buildIdpRequest(idToken));\r\n    }\r\n    _getReauthenticationResolver(auth) {\r\n        return signInWithIdp(auth, this._buildIdpRequest());\r\n    }\r\n    _buildIdpRequest(idToken) {\r\n        const request = {\r\n            requestUri: this.params.requestUri,\r\n            sessionId: this.params.sessionId,\r\n            postBody: this.params.postBody,\r\n            tenantId: this.params.tenantId,\r\n            pendingToken: this.params.pendingToken,\r\n            returnSecureToken: true,\r\n            returnIdpCredential: true\r\n        };\r\n        if (idToken) {\r\n            request.idToken = idToken;\r\n        }\r\n        return request;\r\n    }\r\n}\r\nfunction _signIn(params) {\r\n    return _signInWithCredential(params.auth, new IdpCredential(params), params.bypassAuthState);\r\n}\r\nfunction _reauth(params) {\r\n    const { auth, user } = params;\r\n    _assert(user, auth, \"internal-error\" /* AuthErrorCode.INTERNAL_ERROR */);\r\n    return _reauthenticate(user, new IdpCredential(params), params.bypassAuthState);\r\n}\r\nasync function _link(params) {\r\n    const { auth, user } = params;\r\n    _assert(user, auth, \"internal-error\" /* AuthErrorCode.INTERNAL_ERROR */);\r\n    return _link$1(user, new IdpCredential(params), params.bypassAuthState);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Popup event manager. Handles the popup's entire lifecycle; listens to auth\r\n * events\r\n */\r\nclass AbstractPopupRedirectOperation {\r\n    constructor(auth, filter, resolver, user, bypassAuthState = false) {\r\n        this.auth = auth;\r\n        this.resolver = resolver;\r\n        this.user = user;\r\n        this.bypassAuthState = bypassAuthState;\r\n        this.pendingPromise = null;\r\n        this.eventManager = null;\r\n        this.filter = Array.isArray(filter) ? filter : [filter];\r\n    }\r\n    execute() {\r\n        return new Promise(async (resolve, reject) => {\r\n            this.pendingPromise = { resolve, reject };\r\n            try {\r\n                this.eventManager = await this.resolver._initialize(this.auth);\r\n                await this.onExecution();\r\n                this.eventManager.registerConsumer(this);\r\n            }\r\n            catch (e) {\r\n                this.reject(e);\r\n            }\r\n        });\r\n    }\r\n    async onAuthEvent(event) {\r\n        const { urlResponse, sessionId, postBody, tenantId, error, type } = event;\r\n        if (error) {\r\n            this.reject(error);\r\n            return;\r\n        }\r\n        const params = {\r\n            auth: this.auth,\r\n            requestUri: urlResponse,\r\n            sessionId: sessionId,\r\n            tenantId: tenantId || undefined,\r\n            postBody: postBody || undefined,\r\n            user: this.user,\r\n            bypassAuthState: this.bypassAuthState\r\n        };\r\n        try {\r\n            this.resolve(await this.getIdpTask(type)(params));\r\n        }\r\n        catch (e) {\r\n            this.reject(e);\r\n        }\r\n    }\r\n    onError(error) {\r\n        this.reject(error);\r\n    }\r\n    getIdpTask(type) {\r\n        switch (type) {\r\n            case \"signInViaPopup\" /* AuthEventType.SIGN_IN_VIA_POPUP */:\r\n            case \"signInViaRedirect\" /* AuthEventType.SIGN_IN_VIA_REDIRECT */:\r\n                return _signIn;\r\n            case \"linkViaPopup\" /* AuthEventType.LINK_VIA_POPUP */:\r\n            case \"linkViaRedirect\" /* AuthEventType.LINK_VIA_REDIRECT */:\r\n                return _link;\r\n            case \"reauthViaPopup\" /* AuthEventType.REAUTH_VIA_POPUP */:\r\n            case \"reauthViaRedirect\" /* AuthEventType.REAUTH_VIA_REDIRECT */:\r\n                return _reauth;\r\n            default:\r\n                _fail(this.auth, \"internal-error\" /* AuthErrorCode.INTERNAL_ERROR */);\r\n        }\r\n    }\r\n    resolve(cred) {\r\n        debugAssert(this.pendingPromise, 'Pending promise was never set');\r\n        this.pendingPromise.resolve(cred);\r\n        this.unregisterAndCleanUp();\r\n    }\r\n    reject(error) {\r\n        debugAssert(this.pendingPromise, 'Pending promise was never set');\r\n        this.pendingPromise.reject(error);\r\n        this.unregisterAndCleanUp();\r\n    }\r\n    unregisterAndCleanUp() {\r\n        if (this.eventManager) {\r\n            this.eventManager.unregisterConsumer(this);\r\n        }\r\n        this.pendingPromise = null;\r\n        this.cleanUp();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst PENDING_REDIRECT_KEY = 'pendingRedirect';\r\n// We only get one redirect outcome for any one auth, so just store it\r\n// in here.\r\nconst redirectOutcomeMap = new Map();\r\nclass RedirectAction extends AbstractPopupRedirectOperation {\r\n    constructor(auth, resolver, bypassAuthState = false) {\r\n        super(auth, [\r\n            \"signInViaRedirect\" /* AuthEventType.SIGN_IN_VIA_REDIRECT */,\r\n            \"linkViaRedirect\" /* AuthEventType.LINK_VIA_REDIRECT */,\r\n            \"reauthViaRedirect\" /* AuthEventType.REAUTH_VIA_REDIRECT */,\r\n            \"unknown\" /* AuthEventType.UNKNOWN */\r\n        ], resolver, undefined, bypassAuthState);\r\n        this.eventId = null;\r\n    }\r\n    /**\r\n     * Override the execute function; if we already have a redirect result, then\r\n     * just return it.\r\n     */\r\n    async execute() {\r\n        let readyOutcome = redirectOutcomeMap.get(this.auth._key());\r\n        if (!readyOutcome) {\r\n            try {\r\n                const hasPendingRedirect = await _getAndClearPendingRedirectStatus(this.resolver, this.auth);\r\n                const result = hasPendingRedirect ? await super.execute() : null;\r\n                readyOutcome = () => Promise.resolve(result);\r\n            }\r\n            catch (e) {\r\n                readyOutcome = () => Promise.reject(e);\r\n            }\r\n            redirectOutcomeMap.set(this.auth._key(), readyOutcome);\r\n        }\r\n        // If we're not bypassing auth state, the ready outcome should be set to\r\n        // null.\r\n        if (!this.bypassAuthState) {\r\n            redirectOutcomeMap.set(this.auth._key(), () => Promise.resolve(null));\r\n        }\r\n        return readyOutcome();\r\n    }\r\n    async onAuthEvent(event) {\r\n        if (event.type === \"signInViaRedirect\" /* AuthEventType.SIGN_IN_VIA_REDIRECT */) {\r\n            return super.onAuthEvent(event);\r\n        }\r\n        else if (event.type === \"unknown\" /* AuthEventType.UNKNOWN */) {\r\n            // This is a sentinel value indicating there's no pending redirect\r\n            this.resolve(null);\r\n            return;\r\n        }\r\n        if (event.eventId) {\r\n            const user = await this.auth._redirectUserForId(event.eventId);\r\n            if (user) {\r\n                this.user = user;\r\n                return super.onAuthEvent(event);\r\n            }\r\n            else {\r\n                this.resolve(null);\r\n            }\r\n        }\r\n    }\r\n    async onExecution() { }\r\n    cleanUp() { }\r\n}\r\nasync function _getAndClearPendingRedirectStatus(resolver, auth) {\r\n    const key = pendingRedirectKey(auth);\r\n    const persistence = resolverPersistence(resolver);\r\n    if (!(await persistence._isAvailable())) {\r\n        return false;\r\n    }\r\n    const hasPendingRedirect = (await persistence._get(key)) === 'true';\r\n    await persistence._remove(key);\r\n    return hasPendingRedirect;\r\n}\r\nfunction _clearRedirectOutcomes() {\r\n    redirectOutcomeMap.clear();\r\n}\r\nfunction _overrideRedirectResult(auth, result) {\r\n    redirectOutcomeMap.set(auth._key(), result);\r\n}\r\nfunction resolverPersistence(resolver) {\r\n    return _getInstance(resolver._redirectPersistence);\r\n}\r\nfunction pendingRedirectKey(auth) {\r\n    return _persistenceKeyName(PENDING_REDIRECT_KEY, auth.config.apiKey, auth.name);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function _getRedirectResult(auth, resolverExtern, bypassAuthState = false) {\r\n    const authInternal = _castAuth(auth);\r\n    const resolver = _withDefaultResolver(authInternal, resolverExtern);\r\n    const action = new RedirectAction(authInternal, resolver, bypassAuthState);\r\n    const result = await action.execute();\r\n    if (result && !bypassAuthState) {\r\n        delete result.user._redirectEventId;\r\n        await authInternal._persistUserIfCurrent(result.user);\r\n        await authInternal._setRedirectUser(null, resolverExtern);\r\n    }\r\n    return result;\r\n}\n\nconst STORAGE_AVAILABLE_KEY = '__sak';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// There are two different browser persistence types: local and session.\r\n// Both have the same implementation but use a different underlying storage\r\n// object.\r\nclass BrowserPersistenceClass {\r\n    constructor(storageRetriever, type) {\r\n        this.storageRetriever = storageRetriever;\r\n        this.type = type;\r\n    }\r\n    _isAvailable() {\r\n        try {\r\n            if (!this.storage) {\r\n                return Promise.resolve(false);\r\n            }\r\n            this.storage.setItem(STORAGE_AVAILABLE_KEY, '1');\r\n            this.storage.removeItem(STORAGE_AVAILABLE_KEY);\r\n            return Promise.resolve(true);\r\n        }\r\n        catch (_a) {\r\n            return Promise.resolve(false);\r\n        }\r\n    }\r\n    _set(key, value) {\r\n        this.storage.setItem(key, JSON.stringify(value));\r\n        return Promise.resolve();\r\n    }\r\n    _get(key) {\r\n        const json = this.storage.getItem(key);\r\n        return Promise.resolve(json ? JSON.parse(json) : null);\r\n    }\r\n    _remove(key) {\r\n        this.storage.removeItem(key);\r\n        return Promise.resolve();\r\n    }\r\n    get storage() {\r\n        return this.storageRetriever();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass BrowserSessionPersistence extends BrowserPersistenceClass {\r\n    constructor() {\r\n        super(() => window.sessionStorage, \"SESSION\" /* PersistenceType.SESSION */);\r\n    }\r\n    _addListener(_key, _listener) {\r\n        // Listeners are not supported for session storage since it cannot be shared across windows\r\n        return;\r\n    }\r\n    _removeListener(_key, _listener) {\r\n        // Listeners are not supported for session storage since it cannot be shared across windows\r\n        return;\r\n    }\r\n}\r\nBrowserSessionPersistence.type = 'SESSION';\r\n/**\r\n * An implementation of {@link Persistence} of `SESSION` using `sessionStorage`\r\n * for the underlying storage.\r\n *\r\n * @public\r\n */\r\nconst browserSessionPersistence = BrowserSessionPersistence;\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * URL for Authentication widget which will initiate the OAuth handshake\r\n *\r\n * @internal\r\n */\r\nconst WIDGET_PATH = '__/auth/handler';\r\n/**\r\n * URL for emulated environment\r\n *\r\n * @internal\r\n */\r\nconst EMULATOR_WIDGET_PATH = 'emulator/auth/handler';\r\nfunction _getRedirectUrl(auth, provider, authType, redirectUrl, eventId, additionalParams) {\r\n    _assert(auth.config.authDomain, auth, \"auth-domain-config-required\" /* AuthErrorCode.MISSING_AUTH_DOMAIN */);\r\n    _assert(auth.config.apiKey, auth, \"invalid-api-key\" /* AuthErrorCode.INVALID_API_KEY */);\r\n    const params = {\r\n        apiKey: auth.config.apiKey,\r\n        appName: auth.name,\r\n        authType,\r\n        redirectUrl,\r\n        v: SDK_VERSION,\r\n        eventId\r\n    };\r\n    if (provider instanceof FederatedAuthProvider) {\r\n        provider.setDefaultLanguage(auth.languageCode);\r\n        params.providerId = provider.providerId || '';\r\n        if (!isEmpty(provider.getCustomParameters())) {\r\n            params.customParameters = JSON.stringify(provider.getCustomParameters());\r\n        }\r\n        // TODO set additionalParams from the provider as well?\r\n        for (const [key, value] of Object.entries(additionalParams || {})) {\r\n            params[key] = value;\r\n        }\r\n    }\r\n    if (provider instanceof BaseOAuthProvider) {\r\n        const scopes = provider.getScopes().filter(scope => scope !== '');\r\n        if (scopes.length > 0) {\r\n            params.scopes = scopes.join(',');\r\n        }\r\n    }\r\n    if (auth.tenantId) {\r\n        params.tid = auth.tenantId;\r\n    }\r\n    // TODO: maybe set eid as endipointId\r\n    // TODO: maybe set fw as Frameworks.join(\",\")\r\n    const paramsDict = params;\r\n    for (const key of Object.keys(paramsDict)) {\r\n        if (paramsDict[key] === undefined) {\r\n            delete paramsDict[key];\r\n        }\r\n    }\r\n    return `${getHandlerBase(auth)}?${querystring(paramsDict).slice(1)}`;\r\n}\r\nfunction getHandlerBase({ config }) {\r\n    if (!config.emulator) {\r\n        return `https://${config.authDomain}/${WIDGET_PATH}`;\r\n    }\r\n    return _emulatorUrl(config, EMULATOR_WIDGET_PATH);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _cordovaWindow() {\r\n    return window;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function _getProjectConfig(auth, request = {}) {\r\n    return _performApiRequest(auth, \"GET\" /* HttpMethod.GET */, \"/v1/projects\" /* Endpoint.GET_PROJECT_CONFIG */, request);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait after the app comes back into focus before concluding that\r\n * the user closed the sign in tab.\r\n */\r\nconst REDIRECT_TIMEOUT_MS = 2000;\r\n/**\r\n * Generates the URL for the OAuth handler.\r\n */\r\nasync function _generateHandlerUrl(auth, event, provider) {\r\n    var _a;\r\n    // Get the cordova plugins\r\n    const { BuildInfo } = _cordovaWindow();\r\n    debugAssert(event.sessionId, 'AuthEvent did not contain a session ID');\r\n    const sessionDigest = await computeSha256(event.sessionId);\r\n    const additionalParams = {};\r\n    if (_isIOS()) {\r\n        // iOS app identifier\r\n        additionalParams['ibi'] = BuildInfo.packageName;\r\n    }\r\n    else if (_isAndroid()) {\r\n        // Android app identifier\r\n        additionalParams['apn'] = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Add the display name if available\r\n    if (BuildInfo.displayName) {\r\n        additionalParams['appDisplayName'] = BuildInfo.displayName;\r\n    }\r\n    // Attached the hashed session ID\r\n    additionalParams['sessionId'] = sessionDigest;\r\n    return _getRedirectUrl(auth, provider, event.type, undefined, (_a = event.eventId) !== null && _a !== void 0 ? _a : undefined, additionalParams);\r\n}\r\n/**\r\n * Validates that this app is valid for this project configuration\r\n */\r\nasync function _validateOrigin(auth) {\r\n    const { BuildInfo } = _cordovaWindow();\r\n    const request = {};\r\n    if (_isIOS()) {\r\n        request.iosBundleId = BuildInfo.packageName;\r\n    }\r\n    else if (_isAndroid()) {\r\n        request.androidPackageName = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Will fail automatically if package name is not authorized\r\n    await _getProjectConfig(auth, request);\r\n}\r\nfunction _performRedirect(handlerUrl) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    return new Promise(resolve => {\r\n        cordova.plugins.browsertab.isAvailable(browserTabIsAvailable => {\r\n            let iabRef = null;\r\n            if (browserTabIsAvailable) {\r\n                cordova.plugins.browsertab.openUrl(handlerUrl);\r\n            }\r\n            else {\r\n                // TODO: Return the inappbrowser ref that's returned from the open call\r\n                iabRef = cordova.InAppBrowser.open(handlerUrl, _isIOS7Or8() ? '_blank' : '_system', 'location=yes');\r\n            }\r\n            resolve(iabRef);\r\n        });\r\n    });\r\n}\r\n/**\r\n * This function waits for app activity to be seen before resolving. It does\r\n * this by attaching listeners to various dom events. Once the app is determined\r\n * to be visible, this promise resolves. AFTER that resolution, the listeners\r\n * are detached and any browser tabs left open will be closed.\r\n */\r\nasync function _waitForAppResume(auth, eventListener, iabRef) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    let cleanup = () => { };\r\n    try {\r\n        await new Promise((resolve, reject) => {\r\n            let onCloseTimer = null;\r\n            // DEFINE ALL THE CALLBACKS =====\r\n            function authEventSeen() {\r\n                var _a;\r\n                // Auth event was detected. Resolve this promise and close the extra\r\n                // window if it's still open.\r\n                resolve();\r\n                const closeBrowserTab = (_a = cordova.plugins.browsertab) === null || _a === void 0 ? void 0 : _a.close;\r\n                if (typeof closeBrowserTab === 'function') {\r\n                    closeBrowserTab();\r\n                }\r\n                // Close inappbrowser emebedded webview in iOS7 and 8 case if still\r\n                // open.\r\n                if (typeof (iabRef === null || iabRef === void 0 ? void 0 : iabRef.close) === 'function') {\r\n                    iabRef.close();\r\n                }\r\n            }\r\n            function resumed() {\r\n                if (onCloseTimer) {\r\n                    // This code already ran; do not rerun.\r\n                    return;\r\n                }\r\n                onCloseTimer = window.setTimeout(() => {\r\n                    // Wait two seeconds after resume then reject.\r\n                    reject(_createError(auth, \"redirect-cancelled-by-user\" /* AuthErrorCode.REDIRECT_CANCELLED_BY_USER */));\r\n                }, REDIRECT_TIMEOUT_MS);\r\n            }\r\n            function visibilityChanged() {\r\n                if ((document === null || document === void 0 ? void 0 : document.visibilityState) === 'visible') {\r\n                    resumed();\r\n                }\r\n            }\r\n            // ATTACH ALL THE LISTENERS =====\r\n            // Listen for the auth event\r\n            eventListener.addPassiveListener(authEventSeen);\r\n            // Listen for resume and visibility events\r\n            document.addEventListener('resume', resumed, false);\r\n            if (_isAndroid()) {\r\n                document.addEventListener('visibilitychange', visibilityChanged, false);\r\n            }\r\n            // SETUP THE CLEANUP FUNCTION =====\r\n            cleanup = () => {\r\n                eventListener.removePassiveListener(authEventSeen);\r\n                document.removeEventListener('resume', resumed, false);\r\n                document.removeEventListener('visibilitychange', visibilityChanged, false);\r\n                if (onCloseTimer) {\r\n                    window.clearTimeout(onCloseTimer);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    finally {\r\n        cleanup();\r\n    }\r\n}\r\n/**\r\n * Checks the configuration of the Cordova environment. This has no side effect\r\n * if the configuration is correct; otherwise it throws an error with the\r\n * missing plugin.\r\n */\r\nfunction _checkCordovaConfiguration(auth) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n    const win = _cordovaWindow();\r\n    // Check all dependencies installed.\r\n    // https://github.com/nordnet/cordova-universal-links-plugin\r\n    // Note that cordova-universal-links-plugin has been abandoned.\r\n    // A fork with latest fixes is available at:\r\n    // https://www.npmjs.com/package/cordova-universal-links-plugin-fix\r\n    _assert(typeof ((_a = win === null || win === void 0 ? void 0 : win.universalLinks) === null || _a === void 0 ? void 0 : _a.subscribe) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-universal-links-plugin-fix'\r\n    });\r\n    // https://www.npmjs.com/package/cordova-plugin-buildinfo\r\n    _assert(typeof ((_b = win === null || win === void 0 ? void 0 : win.BuildInfo) === null || _b === void 0 ? void 0 : _b.packageName) !== 'undefined', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-buildInfo'\r\n    });\r\n    // https://github.com/google/cordova-plugin-browsertab\r\n    _assert(typeof ((_e = (_d = (_c = win === null || win === void 0 ? void 0 : win.cordova) === null || _c === void 0 ? void 0 : _c.plugins) === null || _d === void 0 ? void 0 : _d.browsertab) === null || _e === void 0 ? void 0 : _e.openUrl) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    _assert(typeof ((_h = (_g = (_f = win === null || win === void 0 ? void 0 : win.cordova) === null || _f === void 0 ? void 0 : _f.plugins) === null || _g === void 0 ? void 0 : _g.browsertab) === null || _h === void 0 ? void 0 : _h.isAvailable) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    // https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/\r\n    _assert(typeof ((_k = (_j = win === null || win === void 0 ? void 0 : win.cordova) === null || _j === void 0 ? void 0 : _j.InAppBrowser) === null || _k === void 0 ? void 0 : _k.open) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-inappbrowser'\r\n    });\r\n}\r\n/**\r\n * Computes the SHA-256 of a session ID. The SubtleCrypto interface is only\r\n * available in \"secure\" contexts, which covers Cordova (which is served on a file\r\n * protocol).\r\n */\r\nasync function computeSha256(sessionId) {\r\n    const bytes = stringToArrayBuffer(sessionId);\r\n    // TODO: For IE11 crypto has a different name and this operation comes back\r\n    //       as an object, not a promise. This is the old proposed standard that\r\n    //       is used by IE11:\r\n    // https://www.w3.org/TR/2013/WD-WebCryptoAPI-20130108/#cryptooperation-interface\r\n    const buf = await crypto.subtle.digest('SHA-256', bytes);\r\n    const arr = Array.from(new Uint8Array(buf));\r\n    return arr.map(num => num.toString(16).padStart(2, '0')).join('');\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    // This function is only meant to deal with an ASCII charset and makes\r\n    // certain simplifying assumptions.\r\n    debugAssert(/[0-9a-zA-Z]+/.test(str), 'Can only convert alpha-numeric strings');\r\n    if (typeof TextEncoder !== 'undefined') {\r\n        return new TextEncoder().encode(str);\r\n    }\r\n    const buff = new ArrayBuffer(str.length);\r\n    const view = new Uint8Array(buff);\r\n    for (let i = 0; i < str.length; i++) {\r\n        view[i] = str.charCodeAt(i);\r\n    }\r\n    return view;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// The amount of time to store the UIDs of seen events; this is\r\n// set to 10 min by default\r\nconst EVENT_DUPLICATION_CACHE_DURATION_MS = 10 * 60 * 1000;\r\nclass AuthEventManager {\r\n    constructor(auth) {\r\n        this.auth = auth;\r\n        this.cachedEventUids = new Set();\r\n        this.consumers = new Set();\r\n        this.queuedRedirectEvent = null;\r\n        this.hasHandledPotentialRedirect = false;\r\n        this.lastProcessedEventTime = Date.now();\r\n    }\r\n    registerConsumer(authEventConsumer) {\r\n        this.consumers.add(authEventConsumer);\r\n        if (this.queuedRedirectEvent &&\r\n            this.isEventForConsumer(this.queuedRedirectEvent, authEventConsumer)) {\r\n            this.sendToConsumer(this.queuedRedirectEvent, authEventConsumer);\r\n            this.saveEventToCache(this.queuedRedirectEvent);\r\n            this.queuedRedirectEvent = null;\r\n        }\r\n    }\r\n    unregisterConsumer(authEventConsumer) {\r\n        this.consumers.delete(authEventConsumer);\r\n    }\r\n    onEvent(event) {\r\n        // Check if the event has already been handled\r\n        if (this.hasEventBeenHandled(event)) {\r\n            return false;\r\n        }\r\n        let handled = false;\r\n        this.consumers.forEach(consumer => {\r\n            if (this.isEventForConsumer(event, consumer)) {\r\n                handled = true;\r\n                this.sendToConsumer(event, consumer);\r\n                this.saveEventToCache(event);\r\n            }\r\n        });\r\n        if (this.hasHandledPotentialRedirect || !isRedirectEvent(event)) {\r\n            // If we've already seen a redirect before, or this is a popup event,\r\n            // bail now\r\n            return handled;\r\n        }\r\n        this.hasHandledPotentialRedirect = true;\r\n        // If the redirect wasn't handled, hang on to it\r\n        if (!handled) {\r\n            this.queuedRedirectEvent = event;\r\n            handled = true;\r\n        }\r\n        return handled;\r\n    }\r\n    sendToConsumer(event, consumer) {\r\n        var _a;\r\n        if (event.error && !isNullRedirectEvent(event)) {\r\n            const code = ((_a = event.error.code) === null || _a === void 0 ? void 0 : _a.split('auth/')[1]) ||\r\n                \"internal-error\" /* AuthErrorCode.INTERNAL_ERROR */;\r\n            consumer.onError(_createError(this.auth, code));\r\n        }\r\n        else {\r\n            consumer.onAuthEvent(event);\r\n        }\r\n    }\r\n    isEventForConsumer(event, consumer) {\r\n        const eventIdMatches = consumer.eventId === null ||\r\n            (!!event.eventId && event.eventId === consumer.eventId);\r\n        return consumer.filter.includes(event.type) && eventIdMatches;\r\n    }\r\n    hasEventBeenHandled(event) {\r\n        if (Date.now() - this.lastProcessedEventTime >=\r\n            EVENT_DUPLICATION_CACHE_DURATION_MS) {\r\n            this.cachedEventUids.clear();\r\n        }\r\n        return this.cachedEventUids.has(eventUid(event));\r\n    }\r\n    saveEventToCache(event) {\r\n        this.cachedEventUids.add(eventUid(event));\r\n        this.lastProcessedEventTime = Date.now();\r\n    }\r\n}\r\nfunction eventUid(e) {\r\n    return [e.type, e.eventId, e.sessionId, e.tenantId].filter(v => v).join('-');\r\n}\r\nfunction isNullRedirectEvent({ type, error }) {\r\n    return (type === \"unknown\" /* AuthEventType.UNKNOWN */ &&\r\n        (error === null || error === void 0 ? void 0 : error.code) === `auth/${\"no-auth-event\" /* AuthErrorCode.NO_AUTH_EVENT */}`);\r\n}\r\nfunction isRedirectEvent(event) {\r\n    switch (event.type) {\r\n        case \"signInViaRedirect\" /* AuthEventType.SIGN_IN_VIA_REDIRECT */:\r\n        case \"linkViaRedirect\" /* AuthEventType.LINK_VIA_REDIRECT */:\r\n        case \"reauthViaRedirect\" /* AuthEventType.REAUTH_VIA_REDIRECT */:\r\n            return true;\r\n        case \"unknown\" /* AuthEventType.UNKNOWN */:\r\n            return isNullRedirectEvent(event);\r\n        default:\r\n            return false;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _iframeCannotSyncWebStorage() {\r\n    const ua = getUA();\r\n    return _isSafari(ua) || _isIOS(ua);\r\n}\r\n// The polling period in case events are not supported\r\nconst _POLLING_INTERVAL_MS = 1000;\r\n// The IE 10 localStorage cross tab synchronization delay in milliseconds\r\nconst IE10_LOCAL_STORAGE_SYNC_DELAY = 10;\r\nclass BrowserLocalPersistence extends BrowserPersistenceClass {\r\n    constructor() {\r\n        super(() => window.localStorage, \"LOCAL\" /* PersistenceType.LOCAL */);\r\n        this.boundEventHandler = (event, poll) => this.onStorageEvent(event, poll);\r\n        this.listeners = {};\r\n        this.localCache = {};\r\n        // setTimeout return value is platform specific\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        this.pollTimer = null;\r\n        // Safari or iOS browser and embedded in an iframe.\r\n        this.safariLocalStorageNotSynced = _iframeCannotSyncWebStorage() && _isIframe();\r\n        // Whether to use polling instead of depending on window events\r\n        this.fallbackToPolling = _isMobileBrowser();\r\n        this._shouldAllowMigration = true;\r\n    }\r\n    forAllChangedKeys(cb) {\r\n        // Check all keys with listeners on them.\r\n        for (const key of Object.keys(this.listeners)) {\r\n            // Get value from localStorage.\r\n            const newValue = this.storage.getItem(key);\r\n            const oldValue = this.localCache[key];\r\n            // If local map value does not match, trigger listener with storage event.\r\n            // Differentiate this simulated event from the real storage event.\r\n            if (newValue !== oldValue) {\r\n                cb(key, oldValue, newValue);\r\n            }\r\n        }\r\n    }\r\n    onStorageEvent(event, poll = false) {\r\n        // Key would be null in some situations, like when localStorage is cleared\r\n        if (!event.key) {\r\n            this.forAllChangedKeys((key, _oldValue, newValue) => {\r\n                this.notifyListeners(key, newValue);\r\n            });\r\n            return;\r\n        }\r\n        const key = event.key;\r\n        // Check the mechanism how this event was detected.\r\n        // The first event will dictate the mechanism to be used.\r\n        if (poll) {\r\n            // Environment detects storage changes via polling.\r\n            // Remove storage event listener to prevent possible event duplication.\r\n            this.detachListener();\r\n        }\r\n        else {\r\n            // Environment detects storage changes via storage event listener.\r\n            // Remove polling listener to prevent possible event duplication.\r\n            this.stopPolling();\r\n        }\r\n        // Safari embedded iframe. Storage event will trigger with the delta\r\n        // changes but no changes will be applied to the iframe localStorage.\r\n        if (this.safariLocalStorageNotSynced) {\r\n            // Get current iframe page value.\r\n            const storedValue = this.storage.getItem(key);\r\n            // Value not synchronized, synchronize manually.\r\n            if (event.newValue !== storedValue) {\r\n                if (event.newValue !== null) {\r\n                    // Value changed from current value.\r\n                    this.storage.setItem(key, event.newValue);\r\n                }\r\n                else {\r\n                    // Current value deleted.\r\n                    this.storage.removeItem(key);\r\n                }\r\n            }\r\n            else if (this.localCache[key] === event.newValue && !poll) {\r\n                // Already detected and processed, do not trigger listeners again.\r\n                return;\r\n            }\r\n        }\r\n        const triggerListeners = () => {\r\n            // Keep local map up to date in case storage event is triggered before\r\n            // poll.\r\n            const storedValue = this.storage.getItem(key);\r\n            if (!poll && this.localCache[key] === storedValue) {\r\n                // Real storage event which has already been detected, do nothing.\r\n                // This seems to trigger in some IE browsers for some reason.\r\n                return;\r\n            }\r\n            this.notifyListeners(key, storedValue);\r\n        };\r\n        const storedValue = this.storage.getItem(key);\r\n        if (_isIE10() &&\r\n            storedValue !== event.newValue &&\r\n            event.newValue !== event.oldValue) {\r\n            // IE 10 has this weird bug where a storage event would trigger with the\r\n            // correct key, oldValue and newValue but localStorage.getItem(key) does\r\n            // not yield the updated value until a few milliseconds. This ensures\r\n            // this recovers from that situation.\r\n            setTimeout(triggerListeners, IE10_LOCAL_STORAGE_SYNC_DELAY);\r\n        }\r\n        else {\r\n            triggerListeners();\r\n        }\r\n    }\r\n    notifyListeners(key, value) {\r\n        this.localCache[key] = value;\r\n        const listeners = this.listeners[key];\r\n        if (listeners) {\r\n            for (const listener of Array.from(listeners)) {\r\n                listener(value ? JSON.parse(value) : value);\r\n            }\r\n        }\r\n    }\r\n    startPolling() {\r\n        this.stopPolling();\r\n        this.pollTimer = setInterval(() => {\r\n            this.forAllChangedKeys((key, oldValue, newValue) => {\r\n                this.onStorageEvent(new StorageEvent('storage', {\r\n                    key,\r\n                    oldValue,\r\n                    newValue\r\n                }), \r\n                /* poll */ true);\r\n            });\r\n        }, _POLLING_INTERVAL_MS);\r\n    }\r\n    stopPolling() {\r\n        if (this.pollTimer) {\r\n            clearInterval(this.pollTimer);\r\n            this.pollTimer = null;\r\n        }\r\n    }\r\n    attachListener() {\r\n        window.addEventListener('storage', this.boundEventHandler);\r\n    }\r\n    detachListener() {\r\n        window.removeEventListener('storage', this.boundEventHandler);\r\n    }\r\n    _addListener(key, listener) {\r\n        if (Object.keys(this.listeners).length === 0) {\r\n            // Whether browser can detect storage event when it had already been pushed to the background.\r\n            // This may happen in some mobile browsers. A localStorage change in the foreground window\r\n            // will not be detected in the background window via the storage event.\r\n            // This was detected in iOS 7.x mobile browsers\r\n            if (this.fallbackToPolling) {\r\n                this.startPolling();\r\n            }\r\n            else {\r\n                this.attachListener();\r\n            }\r\n        }\r\n        if (!this.listeners[key]) {\r\n            this.listeners[key] = new Set();\r\n            // Populate the cache to avoid spuriously triggering on first poll.\r\n            this.localCache[key] = this.storage.getItem(key);\r\n        }\r\n        this.listeners[key].add(listener);\r\n    }\r\n    _removeListener(key, listener) {\r\n        if (this.listeners[key]) {\r\n            this.listeners[key].delete(listener);\r\n            if (this.listeners[key].size === 0) {\r\n                delete this.listeners[key];\r\n            }\r\n        }\r\n        if (Object.keys(this.listeners).length === 0) {\r\n            this.detachListener();\r\n            this.stopPolling();\r\n        }\r\n    }\r\n    // Update local cache on base operations:\r\n    async _set(key, value) {\r\n        await super._set(key, value);\r\n        this.localCache[key] = JSON.stringify(value);\r\n    }\r\n    async _get(key) {\r\n        const value = await super._get(key);\r\n        this.localCache[key] = JSON.stringify(value);\r\n        return value;\r\n    }\r\n    async _remove(key) {\r\n        await super._remove(key);\r\n        delete this.localCache[key];\r\n    }\r\n}\r\nBrowserLocalPersistence.type = 'LOCAL';\r\n/**\r\n * An implementation of {@link Persistence} of type `LOCAL` using `localStorage`\r\n * for the underlying storage.\r\n *\r\n * @public\r\n */\r\nconst browserLocalPersistence = BrowserLocalPersistence;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SESSION_ID_LENGTH = 20;\r\n/** Custom AuthEventManager that adds passive listeners to events */\r\nclass CordovaAuthEventManager extends AuthEventManager {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.passiveListeners = new Set();\r\n        this.initPromise = new Promise(resolve => {\r\n            this.resolveInialized = resolve;\r\n        });\r\n    }\r\n    addPassiveListener(cb) {\r\n        this.passiveListeners.add(cb);\r\n    }\r\n    removePassiveListener(cb) {\r\n        this.passiveListeners.delete(cb);\r\n    }\r\n    // In a Cordova environment, this manager can live through multiple redirect\r\n    // operations\r\n    resetRedirect() {\r\n        this.queuedRedirectEvent = null;\r\n        this.hasHandledPotentialRedirect = false;\r\n    }\r\n    /** Override the onEvent method */\r\n    onEvent(event) {\r\n        this.resolveInialized();\r\n        this.passiveListeners.forEach(cb => cb(event));\r\n        return super.onEvent(event);\r\n    }\r\n    async initialized() {\r\n        await this.initPromise;\r\n    }\r\n}\r\n/**\r\n * Generates a (partial) {@link AuthEvent}.\r\n */\r\nfunction _generateNewEvent(auth, type, eventId = null) {\r\n    return {\r\n        type,\r\n        eventId,\r\n        urlResponse: null,\r\n        sessionId: generateSessionId(),\r\n        postBody: null,\r\n        tenantId: auth.tenantId,\r\n        error: _createError(auth, \"no-auth-event\" /* AuthErrorCode.NO_AUTH_EVENT */)\r\n    };\r\n}\r\nfunction _savePartialEvent(auth, event) {\r\n    return storage()._set(persistenceKey(auth), event);\r\n}\r\nasync function _getAndRemoveEvent(auth) {\r\n    const event = (await storage()._get(persistenceKey(auth)));\r\n    if (event) {\r\n        await storage()._remove(persistenceKey(auth));\r\n    }\r\n    return event;\r\n}\r\nfunction _eventFromPartialAndUrl(partialEvent, url) {\r\n    var _a, _b;\r\n    // Parse the deep link within the dynamic link URL.\r\n    const callbackUrl = _getDeepLinkFromCallback(url);\r\n    // Confirm it is actually a callback URL.\r\n    // Currently the universal link will be of this format:\r\n    // https://<AUTH_DOMAIN>/__/auth/callback<OAUTH_RESPONSE>\r\n    // This is a fake URL but is not intended to take the user anywhere\r\n    // and just redirect to the app.\r\n    if (callbackUrl.includes('/__/auth/callback')) {\r\n        // Check if there is an error in the URL.\r\n        // This mechanism is also used to pass errors back to the app:\r\n        // https://<AUTH_DOMAIN>/__/auth/callback?firebaseError=<STRINGIFIED_ERROR>\r\n        const params = searchParamsOrEmpty(callbackUrl);\r\n        // Get the error object corresponding to the stringified error if found.\r\n        const errorObject = params['firebaseError']\r\n            ? parseJsonOrNull(decodeURIComponent(params['firebaseError']))\r\n            : null;\r\n        const code = (_b = (_a = errorObject === null || errorObject === void 0 ? void 0 : errorObject['code']) === null || _a === void 0 ? void 0 : _a.split('auth/')) === null || _b === void 0 ? void 0 : _b[1];\r\n        const error = code ? _createError(code) : null;\r\n        if (error) {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                error,\r\n                urlResponse: null,\r\n                sessionId: null,\r\n                postBody: null\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                sessionId: partialEvent.sessionId,\r\n                urlResponse: callbackUrl,\r\n                postBody: null\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction generateSessionId() {\r\n    const chars = [];\r\n    const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (let i = 0; i < SESSION_ID_LENGTH; i++) {\r\n        const idx = Math.floor(Math.random() * allowedChars.length);\r\n        chars.push(allowedChars.charAt(idx));\r\n    }\r\n    return chars.join('');\r\n}\r\nfunction storage() {\r\n    return _getInstance(browserLocalPersistence);\r\n}\r\nfunction persistenceKey(auth) {\r\n    return _persistenceKeyName(\"authEvent\" /* KeyName.AUTH_EVENT */, auth.config.apiKey, auth.name);\r\n}\r\nfunction parseJsonOrNull(json) {\r\n    try {\r\n        return JSON.parse(json);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\n// Exported for testing\r\nfunction _getDeepLinkFromCallback(url) {\r\n    const params = searchParamsOrEmpty(url);\r\n    const link = params['link'] ? decodeURIComponent(params['link']) : undefined;\r\n    // Double link case (automatic redirect)\r\n    const doubleDeepLink = searchParamsOrEmpty(link)['link'];\r\n    // iOS custom scheme links.\r\n    const iOSDeepLink = params['deep_link_id']\r\n        ? decodeURIComponent(params['deep_link_id'])\r\n        : undefined;\r\n    const iOSDoubleDeepLink = searchParamsOrEmpty(iOSDeepLink)['link'];\r\n    return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\r\n}\r\n/**\r\n * Optimistically tries to get search params from a string, or else returns an\r\n * empty search params object.\r\n */\r\nfunction searchParamsOrEmpty(url) {\r\n    if (!(url === null || url === void 0 ? void 0 : url.includes('?'))) {\r\n        return {};\r\n    }\r\n    const [_, ...rest] = url.split('?');\r\n    return querystringDecode(rest.join('?'));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait for the initial auth event before concluding no\r\n * redirect pending\r\n */\r\nconst INITIAL_EVENT_TIMEOUT_MS = 500;\r\nclass CordovaPopupRedirectResolver {\r\n    constructor() {\r\n        this._redirectPersistence = browserSessionPersistence;\r\n        this._shouldInitProactively = true; // This is lightweight for Cordova\r\n        this.eventManagers = new Map();\r\n        this.originValidationPromises = {};\r\n        this._completeRedirectFn = _getRedirectResult;\r\n        this._overrideRedirectResult = _overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        const key = auth._key();\r\n        let manager = this.eventManagers.get(key);\r\n        if (!manager) {\r\n            manager = new CordovaAuthEventManager(auth);\r\n            this.eventManagers.set(key, manager);\r\n            this.attachCallbackListeners(auth, manager);\r\n        }\r\n        return manager;\r\n    }\r\n    _openPopup(auth) {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        _checkCordovaConfiguration(auth);\r\n        const manager = await this._initialize(auth);\r\n        await manager.initialized();\r\n        // Reset the persisted redirect states. This does not matter on Web where\r\n        // the redirect always blows away application state entirely. On Cordova,\r\n        // the app maintains control flow through the redirect.\r\n        manager.resetRedirect();\r\n        _clearRedirectOutcomes();\r\n        await this._originValidation(auth);\r\n        const event = _generateNewEvent(auth, authType, eventId);\r\n        await _savePartialEvent(auth, event);\r\n        const url = await _generateHandlerUrl(auth, event, provider);\r\n        const iabRef = await _performRedirect(url);\r\n        return _waitForAppResume(auth, manager, iabRef);\r\n    }\r\n    _isIframeWebStorageSupported(_auth, _cb) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    _originValidation(auth) {\r\n        const key = auth._key();\r\n        if (!this.originValidationPromises[key]) {\r\n            this.originValidationPromises[key] = _validateOrigin(auth);\r\n        }\r\n        return this.originValidationPromises[key];\r\n    }\r\n    attachCallbackListeners(auth, manager) {\r\n        // Get the global plugins\r\n        const { universalLinks, handleOpenURL, BuildInfo } = _cordovaWindow();\r\n        const noEventTimeout = setTimeout(async () => {\r\n            // We didn't see that initial event. Clear any pending object and\r\n            // dispatch no event\r\n            await _getAndRemoveEvent(auth);\r\n            manager.onEvent(generateNoEvent());\r\n        }, INITIAL_EVENT_TIMEOUT_MS);\r\n        const universalLinksCb = async (eventData) => {\r\n            // We have an event so we can clear the no event timeout\r\n            clearTimeout(noEventTimeout);\r\n            const partialEvent = await _getAndRemoveEvent(auth);\r\n            let finalEvent = null;\r\n            if (partialEvent && (eventData === null || eventData === void 0 ? void 0 : eventData['url'])) {\r\n                finalEvent = _eventFromPartialAndUrl(partialEvent, eventData['url']);\r\n            }\r\n            // If finalEvent is never filled, trigger with no event\r\n            manager.onEvent(finalEvent || generateNoEvent());\r\n        };\r\n        // Universal links subscriber doesn't exist for iOS, so we need to check\r\n        if (typeof universalLinks !== 'undefined' &&\r\n            typeof universalLinks.subscribe === 'function') {\r\n            universalLinks.subscribe(null, universalLinksCb);\r\n        }\r\n        // iOS 7 or 8 custom URL schemes.\r\n        // This is also the current default behavior for iOS 9+.\r\n        // For this to work, cordova-plugin-customurlscheme needs to be installed.\r\n        // https://github.com/EddyVerbruggen/Custom-URL-scheme\r\n        // Do not overwrite the existing developer's URL handler.\r\n        const existingHandleOpenURL = handleOpenURL;\r\n        const packagePrefix = `${BuildInfo.packageName.toLowerCase()}://`;\r\n        _cordovaWindow().handleOpenURL = async (url) => {\r\n            if (url.toLowerCase().startsWith(packagePrefix)) {\r\n                // We want this intentionally to float\r\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                universalLinksCb({ url });\r\n            }\r\n            // Call the developer's handler if it is present.\r\n            if (typeof existingHandleOpenURL === 'function') {\r\n                try {\r\n                    existingHandleOpenURL(url);\r\n                }\r\n                catch (e) {\r\n                    // This is a developer error. Don't stop the flow of the SDK.\r\n                    console.error(e);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * An implementation of {@link PopupRedirectResolver} suitable for Cordova\r\n * based applications.\r\n *\r\n * @public\r\n */\r\nconst cordovaPopupRedirectResolver = CordovaPopupRedirectResolver;\r\nfunction generateNoEvent() {\r\n    return {\r\n        type: \"unknown\" /* AuthEventType.UNKNOWN */,\r\n        eventId: null,\r\n        sessionId: null,\r\n        urlResponse: null,\r\n        postBody: null,\r\n        tenantId: null,\r\n        error: _createError(\"no-auth-event\" /* AuthErrorCode.NO_AUTH_EVENT */)\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n// It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it out\r\n// of autogenerated documentation pages to reduce accidental misuse.\r\nfunction addFrameworkForLogging(auth, framework) {\r\n    _castAuth(auth)._logFramework(framework);\r\n}\n\nexport { AuthPopup, _generateEventId, _getRedirectResult, _overrideRedirectResult, addFrameworkForLogging, cordovaPopupRedirectResolver };\n","import '@firebase/auth-compat';\n"],"names":["punycode","require","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","normalize","str","split","map","s","join","findStatus","val","start","end","length","mid","Math","floor","target","regexAstralSymbols","countSymbols","string","replace","mapChars","domain_name","useSTD3","processing_option","hasError","processed","len","i","codePoint","codePointAt","status","String","fromCodePoint","apply","error","combiningMarksRegex","validateLabel","label","substr","toUnicode","indexOf","search","processing","result","labels","validation","e","module","exports","toASCII","verifyDnsLength","l","total","slice","domain","conversions","sign","x","evenRound","round","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","pow","upperBound","moduloVal","moduloBitLength","moduloBound","V","opts","enforceRange","Number","isFinite","TypeError","abs","isNaN","clamp","undefined","treatNullAsEmptyString","c","S","n","U","charCodeAt","push","d","a","b","Date","RegExp","firebase","exp","FetchProvider","Component","isBrowserExtension","getUA","isReactNative","isNode","isIndexedDBAvailable","isIE","FirebaseError","fetchImpl","name","version","CORDOVA_ONDEVICEREADY_TIMEOUT_MS","_getCurrentScheme","_a","self","location","protocol","_isHttpOrHttps","_isAndroidOrIosCordovaScheme","ua","toLowerCase","match","_isNativeEnvironment","_isIe11","document","documentMode","_isEdge","test","_isLocalStorageNotSynchronized","_isWebStorageSupported","storage","localStorage","key","_generateEventId","_isWorker","global","_isPopupRedirectSupported","_isLikelyCordova","_isCordova","Promise","resolve","timeoutId","setTimeout","addEventListener","clearTimeout","_getSelfWindow","window","Persistence","LOCAL","NONE","SESSION","_assert$3","_assert","PERSISTENCE_KEY","_validatePersistenceArgument","auth","persistence","Object","values","includes","_savePersistenceForRedirect","_initializationPromise","session","getSessionStorageIfAvailable","_persistenceKeyName","config","apiKey","setItem","_getPersistence","_getPersistencesFromRedirect","appName","getItem","inMemoryPersistence","indexedDBLocalPersistence","browserSessionPersistence","sessionStorage","_assert$2","CompatPopupRedirectResolver","constructor","browserResolver","_getInstance","browserPopupRedirectResolver","cordovaResolver","cordovaPopupRedirectResolver","underlyingResolver","_redirectPersistence","_completeRedirectFn","_getRedirectResult","_overrideRedirectResult","_initialize","selectUnderlyingResolver","assertedUnderlyingResolver","_openPopup","provider","authType","eventId","_openRedirect","_isIframeWebStorageSupported","cb","_originValidation","_shouldInitProactively","isCordova","unwrap","object","wrapped","credentialFromResponse","userCredential","credentialFromObject","attachExtraErrorFields","response","customData","_tokenResponse","code","mfaErr","resolver","MultiFactorResolver","getMultiFactorResolver","credential","credErr","tenantId","email","phoneNumber","PhoneAuthProvider","credentialFromResult","providerId","ProviderId","PASSWORD","GOOGLE","GoogleAuthProvider","FACEBOOK","FacebookAuthProvider","GITHUB","GithubAuthProvider","TWITTER","TwitterAuthProvider","oauthIdToken","oauthAccessToken","oauthTokenSecret","pendingToken","nonce","startsWith","SAMLAuthCredential","_create","OAuthCredential","_fromParams","signInMethod","idToken","accessToken","OAuthProvider","rawNonce","credentialFromError","convertCredential","credentialPromise","catch","then","operationType","user","additionalUserInfo","getAdditionalUserInfo","User","getOrCreate","convertConfirmationResult","confirmationResultPromise","confirmationResultExp","verificationId","confirm","verificationCode","hints","resolveSignIn","assertion","_delegate","multiFactor","USER_MAP","has","set","get","delete","reload","toJSON","getIdTokenResult","forceRefresh","getIdToken","linkAndRetrieveDataWithCredential","linkWithCredential","linkWithPhoneNumber","applicationVerifier","linkWithPopup","linkWithRedirect","_castAuth","reauthenticateAndRetrieveDataWithCredential","reauthenticateWithCredential","reauthenticateWithPhoneNumber","reauthenticateWithPopup","reauthenticateWithRedirect","sendEmailVerification","actionCodeSettings","unlink","updateEmail","newEmail","updatePassword","newPassword","updatePhoneNumber","phoneCredential","updateProfile","profile","verifyBeforeUpdateEmail","emailVerified","isAnonymous","metadata","providerData","refreshToken","displayName","photoURL","uid","WeakMap","_assert$1","Auth","app","isInitialized","getImmediate","linkUnderlyingAuth","options","initialize","buildPersistenceHierarchy","popupRedirectResolver","_updateErrorMap","debugErrorMap","emulatorConfig","currentUser","languageCode","settings","tid","useDeviceLanguage","signOut","useEmulator","url","connectAuthEmulator","applyActionCode","checkActionCode","confirmPasswordReset","createUserWithEmailAndPassword","password","fetchProvidersForEmail","fetchSignInMethodsForEmail","isSignInWithEmailLink","emailLink","getRedirectResult","addFrameworkForLogging","framework","onAuthStateChanged","nextOrObserver","errorFn","completed","next","complete","wrapObservers","onIdTokenChanged","sendSignInLinkToEmail","sendPasswordResetEmail","setPersistence","converted","isIndexedDBFullySupported","_isAvailable","browserLocalPersistence","_fail","signInAndRetrieveDataWithCredential","signInWithCredential","signInAnonymously","signInWithCustomToken","token","signInWithEmailAndPassword","signInWithEmailLink","signInWithPhoneNumber","signInWithPopup","signInWithRedirect","updateCurrentUser","verifyPasswordResetCode","_delete","oldNext","newNext","persistences","verifyPhoneNumber","phoneInfoOptions","PHONE_SIGN_IN_METHOD","PROVIDER_ID","RecaptchaVerifier","container","parameters","type","clear","render","verify","AUTH_TYPE","registerAuthCompat","instance","INTERNAL","registerComponent","getProvider","authProvider","setServiceProps","ActionCodeInfo","Operation","EMAIL_SIGNIN","ActionCodeOperation","PASSWORD_RESET","RECOVER_EMAIL","REVERT_SECOND_FACTOR_ADDITION","VERIFY_AND_CHANGE_EMAIL","VERIFY_EMAIL","EmailAuthProvider","SAMLAuthProvider","PhoneMultiFactorGenerator","AuthCredential","Error","setInstantiationMode","setMultipleInstances","registerVersion","default","Headers","Response","Stream","http","Url","whatwgUrl","https","zlib","Readable","BUFFER","Symbol","TYPE","Blob","blobParts","arguments","buffers","size","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","concat","text","toString","arrayBuffer","buf","ab","stream","readable","_read","relativeStart","relativeEnd","max","min","span","slicedBuffer","blob","defineProperties","prototype","enumerable","defineProperty","toStringTag","value","writable","configurable","FetchError","message","systemError","call","errno","captureStackTrace","create","convert","INTERNALS","PassThrough","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","on","err","bodyUsed","consumeBody","ct","headers","assign","json","_this2","JSON","parse","reject","textConverted","_this3","convertBody","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","_this4","alloc","accum","accumBytes","abort","resTimeout","chunk","charset","res","exec","pop","obj","append","getAll","sort","clone","p1","p2","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","writeToStream","dest","write","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","MAP","init","rawHeaders","raw","headerNames","keys","headerName","method","iterator","pairs","pair","Array","forEach","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","entries","kind","k","HeadersIteratorPrototype","index","setPrototypeOf","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","createHeadersLenient","isArray","INTERNALS$1","STATUS_CODES","contentType","statusText","counter","ok","redirected","INTERNALS$2","URL","parse_url","format_url","format","parseURL","urlStr","streamDestructionSupported","isRequest","input","isAbortSignal","signal","Request","parsedURL","href","toUpperCase","inputBody","redirect","follow","compress","agent","getNodeRequestOptions","request","hostname","contentLengthValue","totalBytes","AbortError","URL$1","PassThrough$1","isDomainOrSubdomain","destination","original","orig","endsWith","fetch","send","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","once","socket","isRedirect","statusCode","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createInflate","createInflateRaw","createBrotliDecompress","ap","aq","ar","_signInWithCredential","as","_reauthenticate","at","_link$1","H","au","signInWithIdp","av","aw","debugAssert","ax","ay","az","FederatedAuthProvider","aA","BaseOAuthProvider","aB","_emulatorUrl","aC","_performApiRequest","aD","_isIOS","aE","_isAndroid","aF","_isIOS7Or8","aG","_createError","aH","_isIframe","aI","_isMobileBrowser","aJ","_isIE10","aK","_isSafari","A","ad","ActionCodeURL","D","AuthErrorCodes","aM","AuthImpl","I","EmailAuthCredential","M","N","F","FactorId","aO","T","Q","J","O","OperationType","K","PhoneAuthCredential","P","m","o","R","aP","SignInMethod","W","aL","UserImpl","aN","_getClientVersion","a2","t","beforeAuthStateChanged","a3","a1","G","a5","B","z","deleteUser","aa","al","getAuth","ai","aj","an","j","L","E","initializeAuth","a8","Z","g","ao","v","q","ae","parseActionCodeURL","C","prodErrorMap","_","r","h","am","a0","a7","p","X","Y","$","a6","a9","f","y","ak","ag","ah","u","af","w","ac","a4","isEmpty","querystring","querystringDecode","SDK_VERSION","prefix","digits","random","AuthPopup","associatedEvent","close","_withDefaultResolver","resolverOverride","_popupRedirectResolver","IdpCredential","params","_getIdTokenResponse","_buildIdpRequest","_linkToIdToken","_getReauthenticationResolver","requestUri","sessionId","postBody","returnSecureToken","returnIdpCredential","_signIn","bypassAuthState","_reauth","_link","AbstractPopupRedirectOperation","filter","pendingPromise","eventManager","execute","onExecution","registerConsumer","onAuthEvent","event","urlResponse","getIdpTask","onError","cred","unregisterAndCleanUp","unregisterConsumer","cleanUp","PENDING_REDIRECT_KEY","redirectOutcomeMap","Map","RedirectAction","readyOutcome","_key","hasPendingRedirect","_getAndClearPendingRedirectStatus","_redirectUserForId","pendingRedirectKey","resolverPersistence","_get","_remove","_clearRedirectOutcomes","resolverExtern","authInternal","action","_redirectEventId","_persistUserIfCurrent","_setRedirectUser","STORAGE_AVAILABLE_KEY","BrowserPersistenceClass","storageRetriever","removeItem","_set","stringify","BrowserSessionPersistence","_addListener","_listener","_removeListener","WIDGET_PATH","EMULATOR_WIDGET_PATH","_getRedirectUrl","redirectUrl","additionalParams","authDomain","setDefaultLanguage","getCustomParameters","customParameters","scopes","getScopes","scope","paramsDict","getHandlerBase","emulator","_cordovaWindow","_getProjectConfig","REDIRECT_TIMEOUT_MS","_generateHandlerUrl","BuildInfo","sessionDigest","computeSha256","packageName","_validateOrigin","iosBundleId","androidPackageName","_performRedirect","handlerUrl","cordova","plugins","browsertab","isAvailable","browserTabIsAvailable","iabRef","openUrl","InAppBrowser","open","_waitForAppResume","eventListener","cleanup","onCloseTimer","authEventSeen","closeBrowserTab","resumed","visibilityChanged","visibilityState","addPassiveListener","removePassiveListener","_checkCordovaConfiguration","_b","_c","_d","_e","_f","_g","_h","_j","_k","win","universalLinks","subscribe","missingPlugin","bytes","stringToArrayBuffer","crypto","subtle","digest","arr","Uint8Array","num","padStart","TextEncoder","encode","buff","view","EVENT_DUPLICATION_CACHE_DURATION_MS","AuthEventManager","cachedEventUids","Set","consumers","queuedRedirectEvent","hasHandledPotentialRedirect","lastProcessedEventTime","now","authEventConsumer","add","isEventForConsumer","sendToConsumer","saveEventToCache","onEvent","hasEventBeenHandled","handled","consumer","isRedirectEvent","isNullRedirectEvent","eventIdMatches","eventUid","_iframeCannotSyncWebStorage","_POLLING_INTERVAL_MS","IE10_LOCAL_STORAGE_SYNC_DELAY","BrowserLocalPersistence","boundEventHandler","poll","onStorageEvent","listeners","localCache","pollTimer","safariLocalStorageNotSynced","fallbackToPolling","_shouldAllowMigration","forAllChangedKeys","newValue","oldValue","_oldValue","notifyListeners","detachListener","stopPolling","storedValue","triggerListeners","listener","startPolling","setInterval","StorageEvent","clearInterval","attachListener","SESSION_ID_LENGTH","CordovaAuthEventManager","passiveListeners","initPromise","resolveInialized","resetRedirect","initialized","_generateNewEvent","generateSessionId","_savePartialEvent","persistenceKey","_getAndRemoveEvent","_eventFromPartialAndUrl","partialEvent","callbackUrl","_getDeepLinkFromCallback","searchParamsOrEmpty","errorObject","parseJsonOrNull","decodeURIComponent","chars","allowedChars","idx","charAt","link","doubleDeepLink","iOSDeepLink","iOSDoubleDeepLink","rest","INITIAL_EVENT_TIMEOUT_MS","CordovaPopupRedirectResolver","eventManagers","originValidationPromises","manager","attachCallbackListeners","_auth","_cb","handleOpenURL","noEventTimeout","generateNoEvent","universalLinksCb","eventData","finalEvent","existingHandleOpenURL","packagePrefix","console","_logFramework"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}